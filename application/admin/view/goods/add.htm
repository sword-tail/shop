<!DOCTYPE html>
<html><head>
	    <meta charset="utf-8">
    <title>童老师ThinkPHP交流群：484519446</title>

    <meta name="description" content="Dashboard">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!--Basic Styles-->
    <link href="__admin__/style/bootstrap.css" rel="stylesheet">
    <link href="__admin__/style/font-awesome.css" rel="stylesheet">
    <link href="__admin__/style/weather-icons.css" rel="stylesheet">

    <!--Beyond styles-->
    <link id="beyond-link" href="__admin__/style/beyond.css" rel="stylesheet" type="text/css">
    <link href="__admin__/style/demo.css" rel="stylesheet">
    <link href="__admin__/style/typicons.css" rel="stylesheet">
    <link href="__admin__/style/animate.css" rel="stylesheet">
    <script src="__plus__/ueditor/ueditor.config.js"></script>
    <script src="__plus__/ueditor/ueditor.all.min.js"></script>
    <script src="__plus__/ueditor/lang/zh-cn/zh-cn.js"></script>
    <script src="../../../../public/static/plus/ueditor/ueditor.config.js"></script>
    <style type="text/css">
    .form-control-price{
        width: 150px;
        padding: 6px 12px;
        display: inline-block;
    }
    </style>
</head>
<body>
	<!-- 头部 -->
	{include file="common/top"}

	<!-- /头部 -->

	<div class="main-container container-fluid">
		<div class="page-container">
			            <!-- Page Sidebar -->
            <div class="page-sidebar" id="sidebar">
                <!-- Page Sidebar Header-->
                <div class="sidebar-header-wrapper">
                    <input class="searchinput" type="text">
                    <i class="searchicon fa fa-search"></i>
                    <div class="searchhelper">Search Reports, Charts, Emails or Notifications</div>
                </div>
                <!-- /Page Sidebar Header -->
                <!-- Sidebar Menu -->
                {include file="common/left"}
                <!-- /Sidebar Menu -->
            </div>
            <!-- /Page Sidebar -->
            <!-- Page Content -->
            <div class="page-content">
                <!-- Page Breadcrumb -->
                <div class="page-breadcrumbs">
                    <ul class="breadcrumb">
                                        <li>
                        <a href="{:url('Index/index')}">系统</a>
                    </li>
                                        <li>
                        <a href="{:url('Type/lst')}">商品类型管理</a>
                    </li>
                                        <li class="active">添加商品</li>
                                        </ul>
                </div>
                <!-- /Page Breadcrumb -->

                <!-- Page Body -->
                <div class="page-body">

<div class="row">
    <div class="col-lg-12 col-sm-12 col-xs-12">
        <div class="widget">
            <form class="form-horizontal" role="form" action="" method="post" enctype="multipart/form-data">
                <!-- 商品信息开始 -->
                <div class="widget-body">
                    <div class="widget-main ">
                        <div class="tabbable">
                            <ul class="nav nav-tabs tabs-flat" id="myTab11">
                                <li class="active">
                                    <a data-toggle="tab" href="#baseinfo">
                                        商品基本信息
                                    </a>
                                </li>
                                <li>
                                    <a data-toggle="tab" href="#goodsdes">
                                        描述信息
                                    </a>
                                </li>
                                <li>
                                    <a data-toggle="tab" href="#mbprice">
                                        会员价格信息
                                    </a>
                                </li>
<!--                                <li>-->
<!--                                    <a data-toggle="tab" href="#goodsattr">-->
<!--                                        商品属性-->
<!--                                    </a>-->
<!--                                </li>-->
                                <li>
                                    <a data-toggle="tab" href="#goodsphoto">
                                        商品相册
                                    </a>
                                </li>
                            </ul>
                            <div class="tab-content tabs-flat">
                                <div id="baseinfo" class="tab-pane in active">
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right">商品名称</label>
                                        <div class="col-sm-6">
                                            <input class="form-control"  placeholder="" name="goods_name" required="" type="text">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right">商品主图</label>
                                        <div class="col-sm-6">
                                            <input class="form-control" style="border:none;box-shadow:none" name="og_thumb"  type="file">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right">是否上架</label>
                                        <div class="col-sm-6">
                                            <div class="radio" style="float:left; padding-right:10px ">
                                                <label>
                                                    <input type="radio" name="on_sale" value="1" class="colored-blue" checked="checked">
                                                    <span class="text">是</span>
                                                </label>
                                            </div>
                                            <div class="radio" style="float:left; padding-right:10px">
                                                <label>
                                                    <input type="radio" name="on_sale"  value="0" class="colored-blue">
                                                    <span class="text">否</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right">所属栏目</label>
                                        <div class="col-sm-6">
                                            <select name="category_id">
                                                <option value="">请选择</option>
                                                {volist name="categoryRes" id="cate"}
                                                <option value="{$cate.id}"><?php echo str_repeat('-', $cate['level']*8)?>{$cate.cate_name}</option>
                                                {/volist}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right">所属品牌</label>
                                        <div class="col-sm-6">
                                            <select name="brand_id">
                                                <option value="">请选择</option>
                                                {volist name="brandRes" id="brand"}
                                                <option value="{$brand.id}">{$brand.brand_name}</option>
                                                {/volist}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right">市场价</label>
                                        <div class="col-sm-6">
                                            <input class="form-control"  placeholder="" name="market_price" required="" type="text">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right">本店价</label>
                                        <div class="col-sm-6">
                                            <input class="form-control"  placeholder="" name="shop_price" required="" type="text">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right">重量</label>
                                        <div class="col-sm-6">
                                            <input class="form-control" style="width: 300px; display: inline-block" placeholder="" name="goods_weight" required="" type="text">
                                            <select name="weight_unit">
                                                <option value="kg">kg</option>
                                                <option value="g">g</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div id="goodsdes" class="tab-pane">
                                    <textarea name="goods_des" id="goods_des"></textarea>
                                </div>
                                <div id="mbprice" class="tab-pane">
                                    {volist name="mlRes" id="ml"}
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right">{$ml.level_name}</label>
                                        <div class="col-sm-6">
                                            <input class="form-control"   name="mp[{$ml.id}]"  type="text">
                                        </div>
                                    </div>
                                    {/volist}
                                </div>
<!--                                <div id="goodsattr" class="tab-pane">-->
<!--                                    <div class="form-group">-->
<!--                                        <label for="username" class="col-sm-2 control-label no-padding-right">商品类型</label>-->
<!--                                        <div class="col-sm-6">-->
<!--                                            <select name="type_id">-->
<!--                                                <option>请选择</option>-->
<!--                                                {volist name="typeRes" id="type"}-->
<!--                                                <option value="{$type.id}">{$type.type_name}</option>-->
<!--                                                {/volist}-->
<!--                                            </select>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div id="attr_list">-->
<!--&lt;!&ndash;                                        <div class="form-group">&ndash;&gt;-->
<!--&lt;!&ndash;                                            <label for="username" class="col-sm-2 control-label no-padding-right">颜色</label>&ndash;&gt;-->
<!--&lt;!&ndash;                                            <div class="col-sm-6">&ndash;&gt;-->
<!--&lt;!&ndash;                                                <a href="#">[+]</a>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <select>&ndash;&gt;-->
<!--&lt;!&ndash;                                                    <option>黑色</option>&ndash;&gt;-->
<!--&lt;!&ndash;                                                    <option>白色</option>&ndash;&gt;-->
<!--&lt;!&ndash;                                                </select>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <input class="form-control-price" placeholder="价格" type="text">&ndash;&gt;-->
<!--&lt;!&ndash;                                            </div>&ndash;&gt;-->
<!--&lt;!&ndash;                                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                                        <div class="form-group">&ndash;&gt;-->
<!--&lt;!&ndash;                                            <label for="username" class="col-sm-2 control-label no-padding-right">材质</label>&ndash;&gt;-->
<!--&lt;!&ndash;                                            <div class="col-sm-6">&ndash;&gt;-->
<!--&lt;!&ndash;                                                <select>&ndash;&gt;-->
<!--&lt;!&ndash;                                                    <option>棉纶</option>&ndash;&gt;-->
<!--&lt;!&ndash;                                                    <option>亚麻</option>&ndash;&gt;-->
<!--&lt;!&ndash;                                                </select>&ndash;&gt;-->
<!--&lt;!&ndash;                                            </div>&ndash;&gt;-->
<!--&lt;!&ndash;                                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                                        <div class="form-group">&ndash;&gt;-->
<!--&lt;!&ndash;                                            <label for="username" class="col-sm-2 control-label no-padding-right">材质</label>&ndash;&gt;-->
<!--&lt;!&ndash;                                            <div class="col-sm-6">&ndash;&gt;-->
<!--&lt;!&ndash;                                                <input class="form-control-price"  type="text">&ndash;&gt;-->
<!--&lt;!&ndash;                                            </div>&ndash;&gt;-->
<!--&lt;!&ndash;                                        </div>&ndash;&gt;-->
<!--                                    </div>-->
<!--                                </div>-->
                                <div id="goodsphoto" class="tab-pane">
                                    <div class="form-group">
                                        <label for="username" class="col-sm-2 control-label no-padding-right"></label>
                                        <div class="col-sm-6">
                                            <a href="#" onclick="addrow(this)">[+]</a><input class="form-control" style="border:none;box-shadow:none; display:inline-block;width: 50%" name="goods_photo[]"  type="file">
                                        </div>
                                    </div>
                                    <div id="goods_photo"></div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <button type="submit" class="btn btn-default">保存信息</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 商品信息结束 -->
            </form>
        </div>
    </div>
</div>

                </div>
                <!-- /Page Body -->
            </div>
            <!-- /Page Content -->
		</div>
	</div>

	    <!--Basic Scripts-->
    <script src="__admin__/style/jquery_002.js"></script>
    <script src="__admin__/style/bootstrap.js"></script>
    <script src="__admin__/style/jquery.js"></script>
    <!--Beyond Scripts-->
    <script src="__admin__/style/beyond.js"></script>
    <script type="text/javascript">
        var ue = UE.getEditor('goods_des' ,{ initialFrameHeight:300  , autoHeightEnabled: false});
    </script>
    <script type="text/javascript">
    $("select[name=type_id]").change(function () {
        var type_id=$(this).val();
        $.ajax({
            type:"POST",
            url:"{:url('Attr/ajaxGetAttr')}",
            data:{type_id:type_id},
            dataType:"json",
            success:function (data) {
                var html='';
                $(data).each(function(k,v){
                    if (v.attr_type==1){
                        //单选处理
                        html+="<div class='form-group'>";
                        html+="<label class='col-sm-2 control-label no-padding-right''>"+v.attr_name+"</label>";
                        var attrValuesArr=v.attr_values.split(",");
                        html+="<div class='col-sm-6'><a href='#' onclick='addrow(this)'>[+]</a>";
                        html+="<select>";
                        html+="<option>请选择</option>>";
                        for(var i=0;i<attrValuesArr.length;i++){
                            html+="<option value='"+attrValuesArr[i]+"'>"+attrValuesArr[i]+"</option>>";
                        }
                        html+="</select>";
                        html+="<input class='form-control-price' placeholder='价格' type='text'>";
                        html+="</div></div>";
                    }else{
                        //唯一处理
                        if(v.attr_values){
                            html+="<div class='form-group'>";
                            html+="<label class='col-sm-2 control-label no-padding-right''>"+v.attr_name+"</label>";
                            html+="<div class='col-sm-6'>";
                            var attrValuesArr=v.attr_values.split(",")
                            html+="<select>";
                            html+="<option>请选择</option>>";
                            for(var i=0;i<attrValuesArr.length;i++){
                                html+="<option value='"+attrValuesArr[i]+"'>"+attrValuesArr[i]+"</option>";
                            }
                            html+="</select>";
                            html+="</div></div>"
                        }else{
                            html+="<div class='form-group'>";
                            html+="<label class='col-sm-2 control-label no-padding-right''>"+v.attr_name+"</label>";
                            html+="<div class='col-sm-6'>";
                            html+="<input class='form-control-price type='text'/>"
                            html+="</div></div>"
                        }
                    }
                });
                $("#attr_list").html(html);
            }
        })
    });

    function addrow(o) {
        var div=$(o).parent().parent();
        if($(o).html() == '[+]'){
            var newdiv=div.clone();
            newdiv.find('a').html('[-]');
            div.after(newdiv);
        }else{
            div.remove();
        }
    }
    </script>


</body></html>